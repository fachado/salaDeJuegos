import{d as F}from"./chunk-GWHBJ5D7.js";import{o as T}from"./chunk-PXMDDNHU.js";import{a as k,b as q}from"./chunk-YLICS3A3.js";import{a as E}from"./chunk-V2UF6OC7.js";import{a as N}from"./chunk-6TQQLW6Z.js";import{$ as _,La as P,Oa as r,Pa as l,W as O,Ya as d,Zb as I,_a as u,_b as S,ab as a,bb as o,cb as M,cc as y,da as w,e as j,fb as b,g as c,hb as v,ib as m,la as h,ma as x,mb as s,nb as z,ob as C,vb as Q}from"./chunk-42U72ICL.js";var g=j(N());var f=class n{constructor(t){this.http=t}getPaises(){return c(this,null,function*(){try{return yield(yield fetch("https://restcountries.com/v3.1/all")).json()}catch(t){console.log(t)}})}static \u0275fac=function(e){return new(e||n)(_(E))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};function B(n,t){if(n&1&&(a(0,"div"),M(1,"img",5),o()),n&2){let e=m();r(),u("src",e.currentQuestion.flag,P)}}function V(n,t){if(n&1){let e=b();a(0,"button",6),v("click",function(p){let R=h(e).$implicit,A=m();return x(A.play(R,p))}),s(1),o()}if(n&2){let e=t.$implicit;r(),C(" ",e," ")}}function $(n,t){if(n&1){let e=b();a(0,"div",7)(1,"h3"),s(2),o(),a(3,"button",6),v("click",function(){h(e);let p=m();return x(p.restartGame())}),s(4,"Reiniciar Juego"),o()()}if(n&2){let e=m();r(2),z(e.gameOverText)}}var G=class n{constructor(t,e,i,p){this.router=t;this.apiPaises=e;this.resultadosService=i;this.userService=p;this.loadCountries()}user=null;listOfCountries=[];listOfQuestions=[];victory=!1;activeGame=!1;gameOver=!1;gameOverText="\xA1PERDISTE!";score=0;attempts=3;currentQuestion=null;loadedQuestions=!1;currentIndex=0;correctAnswer=!1;wrongAnswer=!1;ngOnInit(){return c(this,null,function*(){yield this.loadCountries(),this.startGame()})}loadCountries(){return c(this,null,function*(){let t=yield this.apiPaises.getPaises();this.listOfCountries=t.map(e=>({name:e.translations.spa.official,flag:e.flags.png}))})}startGame(){this.generateQuestions(),this.currentQuestion=this.listOfQuestions[this.currentIndex],this.activeGame=!0,console.log("Juego iniciado: Preguntados")}generateQuestions(){this.listOfCountries.sort(()=>Math.random()-.5),this.listOfQuestions=this.listOfCountries.slice(0,10).map(t=>{let e=this.generateOptions(t.name);return{answer:t.name,options:e,flag:t.flag}}),this.loadedQuestions=!0}generateOptions(t){let e=new Set([t]);for(;e.size<4;){let i=this.listOfCountries[this.generateRandomNumber()].name;e.add(i)}return Array.from(e).sort(()=>Math.random()-.5)}generateRandomNumber(){return Math.floor(Math.random()*this.listOfCountries.length)}play(t,e){if(this.activeGame){let i=e.target;i.disabled=!0,t===this.currentQuestion.answer?(this.score++,this.correctAnswer=!0,setTimeout(()=>this.correctAnswer=!1,300),console.log("\xA1Adivinaste!","Preguntados")):(this.wrongAnswer=!0,setTimeout(()=>this.wrongAnswer=!1,300),console.log(`No adivinaste!, era ${this.currentQuestion.answer}`,"Preguntados"),this.attempts--,console.log(`Intentos restantes: ${this.attempts}`)),this.attempts===0||this.currentIndex>=this.listOfQuestions.length-1?this.endGame(!1):(this.currentIndex++,setTimeout(()=>{this.currentQuestion=this.listOfQuestions[this.currentIndex]},500))}}endGame(t){this.activeGame=!1,this.gameOver=!0,this.victory=t,this.gameOverText=t?"\xA1GANASTE!":"\xA1PERDISTE!";let e=this.userService.getUserEmail();e?this.resultadosService.guardarResultado(e,"preguntados",this.score).then(()=>{console.log("Resultado guardado exitosamente")}).catch(i=>{console.error("Error al guardar el resultado:",i)}):(console.error("No se pudo obtener el email del usuario."),g.default.fire({title:"Error",text:"No se pudo obtener el email del usuario. Aseg\xFArate de que est\xE1s autenticado.",icon:"error",confirmButtonText:"Aceptar"}),g.default.fire({title:t?"\xA1Felicidades!":"\xA1Lo siento!",text:t?"\xA1Ganaste el juego! Juega de nuevo.":`Perdiste. La respuesta era ${this.currentQuestion.answer}. Intenta nuevamente.`,icon:t?"success":"error",confirmButtonText:"Reiniciar Juego"}).then(()=>this.restartGame())),g.default.fire({title:t?"\xA1Felicidades!":"\xA1Lo siento!",text:t?"\xA1Ganaste el juego! Juega de nuevo.":`Perdiste. La respuesta era ${this.currentQuestion.answer}. Intenta nuevamente.`,icon:t?"success":"error",confirmButtonText:"Reiniciar Juego"}).then(()=>this.restartGame())}restartGame(){this.resetGameState(),this.generateQuestions(),this.currentQuestion=this.listOfQuestions[this.currentIndex],console.log("Juego Reiniciado","Preguntados")}resetGameState(){this.score=0,this.attempts=3,this.currentIndex=0,this.activeGame=!0,this.victory=!1,this.gameOver=!1,this.gameOverText="\xA1PERDISTE!"}static \u0275fac=function(e){return new(e||n)(l(F),l(f),l(q),l(k))};static \u0275cmp=w({type:n,selectors:[["app-flag-quiz"]],standalone:!0,features:[Q],decls:9,vars:4,consts:[[1,"quiz-container"],[4,"ngIf"],[1,"options"],[3,"click",4,"ngFor","ngForOf"],["class","game-over",4,"ngIf"],["alt","Bandera",1,"flag-image",3,"src"],[3,"click"],[1,"game-over"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"h2"),s(2,"\xBFA qu\xE9 pa\xEDs pertenece esta bandera?"),o(),a(3,"p"),s(4),o(),d(5,B,2,1,"div",1),a(6,"div",2),d(7,V,2,1,"button",3),o(),d(8,$,5,1,"div",4),o()),e&2&&(r(4),C("Puntaje: ",i.score,""),r(),u("ngIf",i.currentQuestion),r(2),u("ngForOf",i.currentQuestion.options),r(),u("ngIf",i.gameOver))},dependencies:[y,I,S,T],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;width:100%;background-image:url(https://firebasestorage.googleapis.com/v0/b/fbst-8c19a.appspot.com/o/Pfondo.avif?alt=media&token=3ea685e8-7581-41f9-ba0b-e0206ef9f28c);background-size:cover;background-position:center;background-repeat:no-repeat;background-attachment:fixed;overflow:hidden}.quiz-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;font-family:Arial,sans-serif;color:#e0e0ff}.quiz-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;color:#a29bfe;text-shadow:0 0 8px #a29bfe,0 0 16px #6c5ce7}.quiz-container[_ngcontent-%COMP%]   .flag-image[_ngcontent-%COMP%]{width:200px;height:auto;margin-bottom:20px;border:2px solid #6c5ce7;border-radius:8px;box-shadow:0 0 12px #6c5ce7,0 0 24px #a29bfe}.quiz-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(120px,1fr));gap:15px;margin-top:20px;width:100%;max-width:400px}.quiz-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 20px;font-size:1rem;color:#fff;background-color:#6c5ce7;border:2px solid #6c5ce7;border-radius:10px;cursor:pointer;transition:all .3s ease;box-shadow:0 0 10px #6c5ce7,0 0 20px #a29bfe,0 0 30px #6c5ce7;outline:none}.quiz-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#dfe6e9;background-color:#a29bfe;box-shadow:0 0 15px #9c88ff,0 0 25px #b2a0ff,0 0 35px #8c7ae6;transform:scale(1.05)}.quiz-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.98);box-shadow:0 0 8px #6c5ce7}.quiz-container[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#444;color:#888;cursor:not-allowed;box-shadow:none}.quiz-container[_ngcontent-%COMP%]   .game-over[_ngcontent-%COMP%]{font-size:1.8rem;color:#ff7675;text-shadow:0 0 10px #ff7675,0 0 20px #d63031;margin-top:20px}.quiz-container[_ngcontent-%COMP%]   .restart-button[_ngcontent-%COMP%]{margin-top:20px;padding:12px 24px;font-size:1rem;color:#fff;background-color:#6c5ce7;border:2px solid #6c5ce7;border-radius:10px;cursor:pointer;transition:all .3s ease;box-shadow:0 0 10px #6c5ce7,0 0 20px #a29bfe,0 0 30px #6c5ce7;outline:none}.quiz-container[_ngcontent-%COMP%]   .restart-button[_ngcontent-%COMP%]:hover{color:#dfe6e9;background-color:#a29bfe;box-shadow:0 0 15px #9c88ff,0 0 25px #b2a0ff,0 0 35px #8c7ae6;transform:scale(1.05)}.quiz-container[_ngcontent-%COMP%]   .restart-button[_ngcontent-%COMP%]:active{transform:scale(.98);box-shadow:0 0 8px #6c5ce7}"]})};export{G as FlagQuizComponent};
