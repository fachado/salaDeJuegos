import{j as g,l,m as f,n as p,o as y,p as b,r as n,s as h,t as s}from"./chunk-5JQXZNA7.js";import{$ as m,W as a,g as d}from"./chunk-42U72ICL.js";var j=class o{userEmailKey="userEmail";setUserEmail(t){localStorage.setItem(this.userEmailKey,t),console.log("Email guardado:",t)}getUserEmail(){let t=localStorage.getItem(this.userEmailKey);return console.log("Obteniendo email:",t),t}clearUserEmail(){localStorage.removeItem(this.userEmailKey)}isUserAdmin(){return localStorage.getItem(this.userEmailKey)==="admin@gmail.com"}static \u0275fac=function(e){return new(e||o)};static \u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})};var I=class o{constructor(t){this.firestore=t;this.resultadosCollection=p(this.firestore,"resultados")}resultadosCollection;guardarResultado(t,e,c){return d(this,null,function*(){let v=n(this.resultadosCollection,s("usuarioId","==",t),s("juego","==",e)),r=yield b(v);if(r.empty){let i={usuarioId:t,juego:e,puntajeTotal:c,jugados:1,fecha:new Date};yield f(this.resultadosCollection,i)}else{let i=y(this.firestore,"resultados",r.docs[0].id),u=r.docs[0].data(),E=u.jugados+1,w=u.puntajeTotal+c;yield h(i,{jugados:E,puntajeTotal:w})}})}getResultadosPorUsuario(t){let e=n(this.resultadosCollection,s("usuarioId","==",t));return l(e)}getResultados(){return l(this.resultadosCollection)}static \u0275fac=function(e){return new(e||o)(m(g))};static \u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})};export{j as a,I as b};
