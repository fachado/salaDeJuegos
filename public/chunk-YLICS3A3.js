import{m as g,o as l,p as f,q as p,r as y,s as b,u as n,v as h,w as s}from"./chunk-V2UF6OC7.js";import{$ as m,W as a,g as d}from"./chunk-42U72ICL.js";var j=class o{userEmailKey="userEmail";setUserEmail(e){localStorage.setItem(this.userEmailKey,e),console.log("Email guardado:",e)}getUserEmail(){let e=localStorage.getItem(this.userEmailKey);return console.log("Obteniendo email:",e),e}clearUserEmail(){localStorage.removeItem(this.userEmailKey)}isUserAdmin(){return localStorage.getItem(this.userEmailKey)==="admin@gmail.com"}isUserLoggedIn(){return localStorage.getItem(this.userEmailKey)!==null}static \u0275fac=function(t){return new(t||o)};static \u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})};var I=class o{constructor(e){this.firestore=e;this.resultadosCollection=p(this.firestore,"resultados")}resultadosCollection;guardarResultado(e,t,c){return d(this,null,function*(){let v=n(this.resultadosCollection,s("usuarioId","==",e),s("juego","==",t)),r=yield b(v);if(r.empty){let i={usuarioId:e,juego:t,puntajeTotal:c,jugados:1,fecha:new Date};yield f(this.resultadosCollection,i)}else{let i=y(this.firestore,"resultados",r.docs[0].id),u=r.docs[0].data(),E=u.jugados+1,w=u.puntajeTotal+c;yield h(i,{jugados:E,puntajeTotal:w})}})}getResultadosPorUsuario(e){let t=n(this.resultadosCollection,s("usuarioId","==",e));return l(t)}getResultados(){return l(this.resultadosCollection)}static \u0275fac=function(t){return new(t||o)(m(g))};static \u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})};export{j as a,I as b};
