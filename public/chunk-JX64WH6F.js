import{o as S}from"./chunk-PXMDDNHU.js";import{a as O}from"./chunk-PO6BKCYX.js";import{a as k,b as I}from"./chunk-26P5D4RR.js";import{c as y}from"./chunk-EQEK2HY6.js";import"./chunk-5JQXZNA7.js";import{a as V}from"./chunk-6TQQLW6Z.js";import{La as g,Oa as a,Pa as c,Ya as f,_a as d,_b as _,ab as n,bb as i,cb as m,cc as x,da as p,e as w,hb as l,ib as C,mb as o,nb as v,ob as h,pb as M,vb as b}from"./chunk-42U72ICL.js";var u=w(V());function j(s,e){if(s&1&&(n(0,"div",7),m(1,"img",8),n(2,"p"),o(3),i(),n(4,"p"),o(5),i()()),s&2){let t=C();a(),d("src",t.currentCard.image,g),a(2),M("Carta actual: ",t.currentCard.value," de ",t.currentCard.suit,""),a(2),v(t.message)}}var P=class s{constructor(e,t,r){this.cardsService=e;this.resultadosService=t;this.userService=r}deckId="";currentCard=null;previousCardValue=0;score=0;message="";ngOnInit(){this.startGame()}startGame(){this.cardsService.createDeck().subscribe(e=>{this.deckId=e.deck_id,this.score=0,this.message="",this.previousCardValue=0,this.drawCard()})}drawCard(){this.cardsService.drawCard(this.deckId).subscribe(e=>{let t=e.cards[0];this.currentCard=t;let r=this.getCardValue(t.value);if(this.previousCardValue!==0)if(this.message==="Mayor"&&r>this.previousCardValue||this.message==="Menor"&&r<this.previousCardValue)this.score++;else{this.guardarResultado(),u.default.fire({title:"\xA1Perdiste!",text:`Tu puntaje final fue: ${this.score}`,icon:"error",confirmButtonText:"Reintentar"}).then(()=>{this.startGame()});return}this.previousCardValue=r})}getCardValue(e){return e==="ACE"?1:e==="KING"?13:e==="QUEEN"?12:e==="JACK"?11:parseInt(e,10)}guessHigher(){this.message="Mayor",this.drawCard()}guessLower(){this.message="Menor",this.drawCard()}guardarResultado(){let e=this.userService.getUserEmail();e?this.resultadosService.guardarResultado(e,"Mayor-Menor",this.score).then(()=>{console.log("Resultado guardado exitosamente")}).catch(t=>{console.error("Error al guardar el resultado:",t)}):(console.error("No se pudo obtener el email del usuario."),u.default.fire({title:"Error",text:"No se pudo obtener el email del usuario. Aseg\xFArate de que est\xE1s autenticado.",icon:"error",confirmButtonText:"Aceptar"}))}static \u0275fac=function(t){return new(t||s)(c(O),c(I),c(k))};static \u0275cmp=p({type:s,selectors:[["app-mayor-menor"]],standalone:!0,features:[b],decls:15,vars:2,consts:[[1,"game-container"],[1,"game-content"],[1,"deck-container"],["src","https://deckofcardsapi.com/static/img/back.png","alt","Baraja de cartas",1,"deck-image"],["class","current-card-container",4,"ngIf"],[1,"buttons"],[3,"click"],[1,"current-card-container"],["alt","Carta actual",1,"current-card",3,"src"]],template:function(t,r){t&1&&(n(0,"body")(1,"div",0)(2,"h2"),o(3,"Juego de Mayor o Menor"),i(),n(4,"p"),o(5),i(),n(6,"div",1)(7,"div",2),m(8,"img",3),i(),f(9,j,6,4,"div",4),i(),n(10,"div",5)(11,"button",6),l("click",function(){return r.guessHigher()}),o(12,"Mayor"),i(),n(13,"button",6),l("click",function(){return r.guessLower()}),o(14,"Menor"),i()()()()),t&2&&(a(5),h("Puntaje: ",r.score,""),a(4),d("ngIf",r.currentCard))},dependencies:[x,_,S,y],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;width:100%}.game-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(to bottom right,#6a0dad,#250c4e);color:#fff;font-family:Arial,sans-serif;text-align:center;overflow:hidden}h2[_ngcontent-%COMP%]{margin-bottom:20px}.game-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:relative}.deck-container[_ngcontent-%COMP%]{margin-right:20px}.deck-image[_ngcontent-%COMP%]{width:150px}.current-card-container[_ngcontent-%COMP%]{transition:transform .5s ease-in-out;transform:translateY(0)}.current-card-container.card-animate[_ngcontent-%COMP%]{transform:translateY(-50px)}.current-card[_ngcontent-%COMP%]{width:150px}.buttons[_ngcontent-%COMP%]{margin-top:20px}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#ffffff1a;color:#fff;border:none;padding:10px 20px;margin:0 10px;cursor:pointer;transition:background-color .3s}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#fff3}"]})};export{P as MayorMenorComponent};
